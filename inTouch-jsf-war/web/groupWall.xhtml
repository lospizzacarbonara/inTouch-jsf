<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head >
        <title>InTouch</title>
    </h:head>
    
    <h:body>
        <ui:insert name="header" >
            <ui:include src="navBar.xhtml"/>
	</ui:insert>
        <!--group info [Group Name+Desc]-->
        
        <div class="GroupInfo" align="left">
            <h1>#{socialGroupBean.name}</h1>
        <br/>
            #{socialGroupBean.description}
        </div>
        
        <table class="groupWallTable" align="center">
            <tr id="miembros">
                <td>
                    <ul>
                        <ui:repeat var="member" value="#{socialGroupBean.userList}">
                            <h:form>
                                <h:commandLink action="#{userProfileUserBean.doUserProfileUser(member)}">
                                    <i class="fa fa-user-circle" aria-hidden="true"></i>
                                    #{member.getUsername()}
                                </h:commandLink>
                            </h:form>                             
                            <br/>
                        </ui:repeat>
                    </ul>
                </td>
                
                <td class="posts">
                    <div id="groupPost">
                        <ui:repeat var="post" value="#{socialGroupBean.groupPostList}">
                            <div class="box">
                                <span class="deletePost" style="cursor: pointer; margin-right: -8px; float: right; color: red;">
                                    <h:form rendered="#{post.getAuthor().equals(loginBean.user)}">
                                        <h:commandButton class="noStyleButton" value="&times;" action="#{adminPostBean.doPostDeletion(post)}" />
                                    </h:form>
                                </span>
                                <h3 align="center">  
                                    <h:form>
                                        <h:commandLink action="#{userProfileUserBean.doUserProfileUser(post.getAuthor())}">
                                            <i class="fa fa-user-circle" aria-hidden="true"></i>
                                            #{post.getAuthor().getUsername()}
                                        </h:commandLink>
                                    </h:form>      
                                </h3>
                                <p><h:outputText value="#{postBean.parsePost(post.getBody())}" escape="false"/></p>
                                <span style="color: darkgrey; margin-right: -8px; float: right; font-size: smaller">#{postBean.printDate(post.getPublishedDate())}</span>
                            </div>
                        
                        </ui:repeat>
                        
                    </div>
                    
                </td>
            </tr>
            
            
        </table>
        
        <div id="postModal" class="modal" align="center">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div align="center"><p>Mensaje:</p></div>
                <h:form id="postForm">
                    <h:inputTextarea value="#{groupPostBean.body}" rows="5" cols="50" required="true" requiredMessage="debes introducir texto para el post"></h:inputTextarea><br/><br/>
                    public <h:selectBooleanCheckbox  value="#{groupPostBean.isPublic}" /><br/>
                    <!-- date and author on Bean -->
                    <h:commandButton value="Post it!" action="#{groupPostBean.doPostCreation()}"/>
                </h:form>
            </div>
        </div>
        
        <h:panelGrid >
        <h1><h:dataTable></h:dataTable></h1>
        
        
        
            
        </h:panelGrid>
    </h:body>
</html>

