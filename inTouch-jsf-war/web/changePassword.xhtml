<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    
    
     <h:head>
        <title>User Profile</title>
        <link rel="stylesheet" href="resources/css/navmenu.css" />
        <link rel="stylesheet" href="resources/css/inTouch.css" />
        <link rel="stylesheet" href="resources/css/perfil.css" /> 
        <link rel="stylesheet" href="resources/css/changePassword.css"/>
    </h:head>
    <h:body>
        <!-- Menu de navegacion -->
        <ui:insert name="header" >
            <ui:include src="navBar.xhtml"/>
	</ui:insert>   
        
         <!-- Titulo de la pÃ¡gina  -->
        <div name="titulo" class="tituloPerfil">
            <h1  align="center">Change Password</h1>
        </div>
        <br/>

        <h:form id="cambioDeClave" >
            <fieldset name="cambioClave1" class="clave">
                <legend>Update password</legend>
                <fieldset class="claveVieja">
                    <legend>Old Password</legend>
                    <table name="clave" class="centradoClave">
                        <tr class="filaPerfil">
                            <th class="alineadoDerecha" colspan="15">
                                <label for="oldPassword">Current password:</label>
                            </th>
                            <td colspan="3">
                                <h:inputSecret id="oldPassword" size="28" value="#{changePasswordBean.oldPassword}" 
                                             required="true" requiredMessage="Current Password: Validation Error: Value needed"/>
                            </td>
                        </tr>
                    </table>
                </fieldset>
    
                <fieldset class="claveNueva">
                    <legend>New Password</legend>
                    <table name="cambioClave2" class="centradoClave">
                        <tr class="filaPerfil">
                            <th class="alineadoDerecha" colspan="15">
                                <label for="newPassword">New Password:</label>
                            </th>
                            <td colspan="3">
                                <h:inputSecret id="newPassword" size="28" value="#{changePasswordBean.newPassword1}"
                                               required="true" requiredMessage="New Password: Validation Error: Value needed"/>
                            </td>
                        </tr>
                        <tr class="filaPerfil">
                            <th class="alineadoDerecha" colspan="15">
                                <label for="newPasswordAgain">Repeat new password:</label>
                            </th>
                            <td colspan="3">
                                <h:inputSecret id="newPasswordAgain" size="28" value="#{changePasswordBean.newPassword2}"
                                               required="true" requiredMessage="Repeat New Password: Validation Error: Value needed"/>
                            </td>
                        </tr>
                        <tr>
                            <td rowspan="2" colspan="15">&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                    </table>
                </fieldset>
                <h:panelGroup styleClass="#{!oldPassword.valid ? 'error' : 'none'}">
                    <fieldset class="messageError1">
                        <h:message for="oldPassword"/>
                    </fieldset>
                </h:panelGroup>  
                <h:panelGroup styleClass="#{!newPassword.valid ? 'error' : 'none'}">
                    <fieldset class="messageError2">
                        <h:message for="newPassword"/>
                    </fieldset>
                </h:panelGroup> 
                <h:panelGroup styleClass="#{!newPasswordAgain.valid ? 'error' : 'none'}">
                    <fieldset class="messageError3">
                        <h:message for="newPasswordAgain"/>
                    </fieldset>
                </h:panelGroup> 
                <h:panelGroup layout="block" rendered="#{!changePasswordBean.oldPasswordOK}">
                    <fieldset class="messageError1">
                        Current Password: Validation Error: Password Incorrect
                    </fieldset>
                </h:panelGroup>
                <h:panelGroup layout="block" rendered="#{!changePasswordBean.newPasswordsEquals}">
                    <fieldset class="messageError2">
                        New Password: Validation Error: The repetition is different
                    </fieldset>
                </h:panelGroup>
                <h:panelGroup layout="block" rendered="#{!changePasswordBean.newPasswordDiffCurrent}">
                    <fieldset class="messageError3">
                        Validation Error: The New Password is the same as the actual password
                    </fieldset>
                </h:panelGroup>
                <h:panelGroup layout="block" rendered="#{changePasswordBean.allOk}">
                    <fieldset class="messageOK">
                        The password was succesfully changed
                    </fieldset>
                </h:panelGroup>
            </fieldset>
       
            <fieldset name="cambioClave3" class="boton">
                <h:commandButton id="saveChange" value="Save changes" action="#{changePasswordBean.doSave()}"/>
            </fieldset>
            
        </h:form>
    </h:body>
</html>

