<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Friends</title>
        <link rel="stylesheet" href="resources/css/inTouch.css" />
        <link rel="stylesheet" href="resources/css/navmenu.css" />
        <link rel="stylesheet" href="resources/css/friends.css" />
    </h:head>
    <h:body>
        <ui:insert name="header" >
            <ui:include src="navBar.xhtml"/>
	</ui:insert>
        
        <!-- Pending to Accept Friends -->
        <h:panelGroup layout="block" rendered="#{!friendsBean.pendingToAcceptFriendList.isEmpty()}">
            <fieldset>
                <legend>Pending to accept friends</legend> 
                <ui:repeat var="user" value="#{friendsBean.pendingToAcceptFriendList}">
                    <fieldset class="thirdSize">
                        <legend class="center-legend">
                            <h:form>
                                <h:commandLink action="#{userProfileBean.doProfileUser(user)}" value="#{user.getUsername()}"/>
                            </h:form>
                        </legend>
                        <h:form>
                            <h:commandButton action="#{friendsBean.accept(user)}" value="Accept"/>
                        </h:form>
                        <h:form>
                            <h:commandButton action="#{friendsBean.deny(user)}" value="Deny"/>
                        </h:form>
                    </fieldset>
                </ui:repeat>
            </fieldset>
        </h:panelGroup>
        
        <!-- Pending Friends -->
        <h:panelGroup layout="block" rendered="#{!friendsBean.pendingFriendList.isEmpty()}">
            <fieldset>
                <legend>Pending friends</legend> 
                <ui:repeat var="user" value="#{friendsBean.pendingFriendList}">
                    <fieldset class="thirdSize">
                        <legend class="center-legend">
                            <h:form>
                                <h:commandLink action="#{userProfileBean.doProfileUser(user)}" value="#{user.getUsername()}"/>
                            </h:form>
                        </legend>
                        <h:form>
                            <h:commandButton action="#{friendsBean.cancel(user)}" value="Cancel request"/>
                        </h:form>
                    </fieldset>
                </ui:repeat>
            </fieldset>
        </h:panelGroup>
        
        <!-- Friends -->
        <h:panelGroup layout="block" rendered="#{!friendsBean.friendList.isEmpty()}">
            <fieldset>
                <legend>Friends</legend> 
                <ui:repeat var="user" value="#{friendsBean.friendList}">
                    <fieldset class="thirdSize">
                        <legend class="center-legend">
                            <h:form>
                                <h:commandLink action="#{userProfileBean.doProfileUser(user)}" value="#{user.getUsername()}"/>
                            </h:form>
                        </legend>
                        <h:form>
                            <h:commandButton action="#{friendsBean.remove(user)}" value="Remove friend"/>
                        </h:form>
                    </fieldset>
                </ui:repeat>
            </fieldset>
        </h:panelGroup>
        
        <!-- No Friends -->
        <h:panelGroup layout="block" rendered="#{friendsBean.friendList.isEmpty()}">
            <fieldset>
                <legend>Friends</legend> 
                You dont have any friends yet. <h:link outcome="search" value="Search for them!"/>
            </fieldset>
        </h:panelGroup>
    </h:body>
</html>

